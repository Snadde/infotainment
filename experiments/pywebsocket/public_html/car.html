<!DOCTYPE html>
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script>

    var counter = 0;
    
    $(document).ready(function() {
        function debug(str) {
		    $("#debug").append("<p>"+str+"</p>");
        };
		
        ws = new WebSocket("ws://localhost:8080/bridge");

        /* Define websocket handlers */
        ws.onmessage = function(evt) {
            var obj = $.parseJSON(evt.data);
            $("#msg").append("<p>" + obj.message + "</p>");
            console.log(obj);
		};
        ws.onclose = function() {
		    debug("socket closed");
        };
        ws.onopen = function() {
		    debug("connected...");
			ws.send('{"message" : "OH HAI!"}');
   		};
	});
    
    /* Define click handler */
	$(document).click(function () {
	    ws.send("Click number " + counter);
        counter++;
	});
</script>
</head>
<body>
	<div id="debug"></div>
	<div id="msg"></div>
</body>
</html>














